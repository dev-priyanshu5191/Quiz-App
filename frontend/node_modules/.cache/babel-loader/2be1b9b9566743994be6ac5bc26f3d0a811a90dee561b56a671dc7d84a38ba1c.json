{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useNavigate}from'react-router-dom';import{useAuth}from'../../context/AuthContext';import Swal from'sweetalert2';import{FaSignOutAlt}from'react-icons/fa';import'./Dashboard.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Dashboard=()=>{var _user$name,_userData$attemptedQu;const[userData,setUserData]=useState(null);const[loading,setLoading]=useState(true);const{user,logout}=useAuth();const navigate=useNavigate();useEffect(()=>{if(!user){navigate('/login');return;}fetchUserData();},[user,navigate]);const fetchUserData=async()=>{try{const token=localStorage.getItem('token');const response=await fetch('http://localhost:5000/api/users/profile',{headers:{'x-auth-token':token}});if(response.ok){const data=await response.json();setUserData(data);}}catch(error){console.error('Error fetching user data:',error);}finally{setLoading(false);}};const handleStartQuiz=()=>{navigate('/quiz-setup');};const handleLogout=async()=>{const result=await Swal.fire({title:'Logout?',text:'Are you sure you want to logout?',icon:'question',showCancelButton:true,confirmButtonColor:'#d33',cancelButtonColor:'#667eea',confirmButtonText:'Yes, Logout',cancelButtonText:'Cancel'});if(result.isConfirmed){logout();await Swal.fire({icon:'success',title:'Logged Out',text:'You have been successfully logged out.',confirmButtonColor:'#667eea',timer:1500,timerProgressBar:true,showConfirmButton:false});navigate('/login');}};if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"loading\",children:\"Loading...\"});}return/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard-header\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"user-info\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"user-avatar\",children:/*#__PURE__*/_jsx(\"span\",{children:user===null||user===void 0?void 0:(_user$name=user.name)===null||_user$name===void 0?void 0:_user$name.charAt(0).toUpperCase()})}),/*#__PURE__*/_jsxs(\"div\",{className:\"user-details\",children:[/*#__PURE__*/_jsxs(\"h1\",{children:[\"Hello \",user===null||user===void 0?void 0:user.name,\"!\"]}),/*#__PURE__*/_jsx(\"p\",{children:\"Best of luck for your exam\"})]})]}),/*#__PURE__*/_jsxs(\"button\",{onClick:handleLogout,className:\"logout-btn\",children:[/*#__PURE__*/_jsx(FaSignOutAlt,{}),\" Logout\"]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"dashboard-content\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"panels-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"panel user-panel\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"User Dashboard\"}),(userData===null||userData===void 0?void 0:(_userData$attemptedQu=userData.attemptedQuizzes)===null||_userData$attemptedQu===void 0?void 0:_userData$attemptedQu.length)>0?/*#__PURE__*/_jsxs(\"div\",{className:\"quiz-history\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Previous Attempts\"}),/*#__PURE__*/_jsx(\"div\",{className:\"quiz-list\",children:userData.attemptedQuizzes.map((quiz,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"quiz-item\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"quiz-info\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"quiz-date\",children:new Date(quiz.attemptedAt).toLocaleDateString()}),/*#__PURE__*/_jsxs(\"span\",{className:\"quiz-score\",children:[\"Score: \",quiz.score,\"/\",quiz.totalQuestions,\" (\",quiz.percentage.toFixed(1),\"%)\"]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"performance-indicator\",children:quiz.percentage>=80?'Excellent':quiz.percentage>=60?'Good':'Needs Improvement'})]},index))})]}):/*#__PURE__*/_jsx(\"div\",{className:\"no-quizzes\",children:/*#__PURE__*/_jsx(\"p\",{children:\"No quizzes attempted yet. Start your first quiz!\"})}),/*#__PURE__*/_jsx(\"button\",{onClick:handleStartQuiz,className:\"start-quiz-btn\",children:\"Start Your Quiz\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"panel admin-panel\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Coding Platform\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Coding Platform coming soon...\"})]})]})})]});};export default Dashboard;","map":{"version":3,"names":["React","useState","useEffect","useNavigate","useAuth","Swal","FaSignOutAlt","jsx","_jsx","jsxs","_jsxs","Dashboard","_user$name","_userData$attemptedQu","userData","setUserData","loading","setLoading","user","logout","navigate","fetchUserData","token","localStorage","getItem","response","fetch","headers","ok","data","json","error","console","handleStartQuiz","handleLogout","result","fire","title","text","icon","showCancelButton","confirmButtonColor","cancelButtonColor","confirmButtonText","cancelButtonText","isConfirmed","timer","timerProgressBar","showConfirmButton","className","children","name","charAt","toUpperCase","onClick","attemptedQuizzes","length","map","quiz","index","Date","attemptedAt","toLocaleDateString","score","totalQuestions","percentage","toFixed"],"sources":["E:/AllProjects/Quiz-App-master/frontend/src/pages/Dashboard/Dashboard.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { useAuth } from '../../context/AuthContext';\r\nimport Swal from 'sweetalert2';\r\nimport { FaSignOutAlt } from 'react-icons/fa';\r\nimport './Dashboard.css';\r\n\r\nconst Dashboard = () => {\r\n    const [userData, setUserData] = useState(null);\r\n    const [loading, setLoading] = useState(true);\r\n    const { user, logout } = useAuth();\r\n    const navigate = useNavigate();\r\n\r\n    useEffect(() => {\r\n        if (!user) {\r\n            navigate('/login');\r\n            return;\r\n        }\r\n\r\n        fetchUserData();\r\n    }, [user, navigate]);\r\n\r\n    const fetchUserData = async () => {\r\n        try {\r\n            const token = localStorage.getItem('token');\r\n            const response = await fetch('http://localhost:5000/api/users/profile', {\r\n                headers: {\r\n                    'x-auth-token': token\r\n                }\r\n            });\r\n\r\n            if (response.ok) {\r\n                const data = await response.json();\r\n                setUserData(data);\r\n            }\r\n        } catch (error) {\r\n            console.error('Error fetching user data:', error);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    const handleStartQuiz = () => {\r\n        navigate('/quiz-setup');\r\n    };\r\n\r\n    const handleLogout = async () => {\r\n        const result = await Swal.fire({\r\n            title: 'Logout?',\r\n            text: 'Are you sure you want to logout?',\r\n            icon: 'question',\r\n            showCancelButton: true,\r\n            confirmButtonColor: '#d33',\r\n            cancelButtonColor: '#667eea',\r\n            confirmButtonText: 'Yes, Logout',\r\n            cancelButtonText: 'Cancel'\r\n        });\r\n\r\n        if (result.isConfirmed) {\r\n            logout();\r\n            await Swal.fire({\r\n                icon: 'success',\r\n                title: 'Logged Out',\r\n                text: 'You have been successfully logged out.',\r\n                confirmButtonColor: '#667eea',\r\n                timer: 1500,\r\n                timerProgressBar: true,\r\n                showConfirmButton: false\r\n            });\r\n            navigate('/login');\r\n        }\r\n    };\r\n\r\n    if (loading) {\r\n        return <div className=\"loading\">Loading...</div>;\r\n    }\r\n\r\n    return (\r\n        <div className=\"dashboard-container\">\r\n            <div className=\"dashboard-header\">\r\n                <div className=\"user-info\">\r\n                    <div className=\"user-avatar\">\r\n                        <span>{user?.name?.charAt(0).toUpperCase()}</span>\r\n                    </div>\r\n                    <div className=\"user-details\">\r\n                        <h1>Hello {user?.name}!</h1>\r\n                        <p>Best of luck for your exam</p>\r\n                    </div>\r\n                </div>\r\n                <button onClick={handleLogout} className=\"logout-btn\">\r\n                    <FaSignOutAlt /> Logout\r\n                </button>\r\n            </div>\r\n\r\n            <div className=\"dashboard-content\">\r\n                <div className=\"panels-container\">\r\n                    {/* User Panel */}\r\n                    <div className=\"panel user-panel\">\r\n                        <h2>User Dashboard</h2>\r\n\r\n                        {userData?.attemptedQuizzes?.length > 0 ? (\r\n                            <div className=\"quiz-history\">\r\n                                <h3>Previous Attempts</h3>\r\n                                <div className=\"quiz-list\">\r\n                                    {userData.attemptedQuizzes.map((quiz, index) => (\r\n                                        <div key={index} className=\"quiz-item\">\r\n                                            <div className=\"quiz-info\">\r\n                                                <span className=\"quiz-date\">\r\n                                                    {new Date(quiz.attemptedAt).toLocaleDateString()}\r\n                                                </span>\r\n                                                <span className=\"quiz-score\">\r\n                                                    Score: {quiz.score}/{quiz.totalQuestions} ({quiz.percentage.toFixed(1)}%)\r\n                                                </span>\r\n                                            </div>\r\n                                            <div className=\"performance-indicator\">\r\n                                                {quiz.percentage >= 80 ? 'Excellent' :\r\n                                                    quiz.percentage >= 60 ? 'Good' : 'Needs Improvement'}\r\n                                            </div>\r\n                                        </div>\r\n                                    ))}\r\n                                </div>\r\n                            </div>\r\n                        ) : (\r\n                            <div className=\"no-quizzes\">\r\n                                <p>No quizzes attempted yet. Start your first quiz!</p>\r\n                            </div>\r\n                        )}\r\n\r\n                        <button onClick={handleStartQuiz} className=\"start-quiz-btn\">\r\n                            Start Your Quiz\r\n                        </button>\r\n                    </div>\r\n\r\n                    {/* Admin Panel Placeholder */}\r\n                    <div className=\"panel admin-panel\">\r\n                        <h2>Coding Platform</h2>\r\n                        <p>Coding Platform coming soon...</p>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Dashboard;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}